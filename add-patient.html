<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VISIOR ‚Äî Add Patient</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'DM Sans', sans-serif; background: #f4f7fc; color: #1a2035; }
  .header { background: white; border-bottom: 1px solid #e2e6f0; padding: 0 32px; height: 64px; display: flex; align-items: center; justify-content: space-between; }
  .logo { display: flex; align-items: center; gap: 10px; text-decoration: none; cursor: pointer; }
  .logo-icon { width: 36px; height: 36px; background: linear-gradient(135deg, #4567B7, #334e96); border-radius: 9px; display: flex; align-items: center; justify-content: center; }
  .main { max-width: 900px; margin: 40px auto; padding: 0 32px; }
  .back-btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; border: 1px solid #e2e6f0; border-radius: 6px; background: white; cursor: pointer; margin-bottom: 24px; }
  .form-container { background: white; border-radius: 12px; border: 1px solid #e2e6f0; padding: 32px; }
  h1 { font-size: 28px; margin-bottom: 8px; }
  .subtitle { color: #5a6480; margin-bottom: 32px; }
  .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
  .form-group { margin-bottom: 20px; }
  .full-width { grid-column: span 2; }
  label { display: block; font-weight: 600; margin-bottom: 8px; color: #1a2035; }
  input, select, textarea { width: 100%; padding: 12px; border: 1px solid #e2e6f0; border-radius: 8px; font-family: 'DM Sans', sans-serif; font-size: 14px; }
  input:focus, select:focus, textarea:focus { outline: none; border-color: #4567B7; }
  .checkbox-group { display: flex; gap: 20px; align-items: center; margin-top: 8px; }
  .checkbox-item { display: flex; align-items: center; gap: 8px; }
  .checkbox-item input[type="checkbox"] { width: 18px; height: 18px; }
  .btn-primary { width: 100%; padding: 14px; background: #4567B7; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 24px; }
  .btn-primary:hover { background: #334e96; }
  .consent-badge { background: #f0fdf4; border: 1px solid #bbf7d0; padding: 12px; border-radius: 8px; margin-bottom: 24px; display: flex; gap: 12px; align-items: center; }
  .footer-links { display: flex; justify-content: center; gap: 16px; margin-top: 40px; padding: 20px 0; border-top: 1px solid #e2e6f0; }
  .footer-links a { color: #8b94b0; text-decoration: none; font-size: 12px; }
  .footer-links a:hover { color: #4567B7; }
</style>
</head>
<body>
<header class="header">
  <div class="logo" onclick="window.location.href='home.html'">
    <div class="logo-icon">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
        <path d="M12 2L4 6v6c0 5.25 3.5 10.15 8 11.5C16.5 22.15 20 17.25 20 12V6L12 2z"/>
      </svg>
    </div>
    <div><strong style="color: #4567B7;">VISIOR</strong> <span style="font-size:10px;">ADD PATIENT</span></div>
  </div>
</header>

<div class="main">
  <button class="back-btn" onclick="window.location.href='pi-dashboard.html'">‚Üê Back to Dashboard</button>
  
  <div class="form-container">
    <h1>Add New Patient</h1>
    <div class="subtitle">Enroll a new patient to a clinical trial</div>

    <div class="consent-badge">
      <span style="font-size: 24px;">üìã</span>
      <div>
        <strong>Informed Consent Required</strong><br>
        <span style="color: #16a34a; font-size: 14px;">Verify that consent form has been signed before proceeding</span>
      </div>
    </div>

    <form id="patientForm">
      <div class="form-grid">
        <div class="form-group">
          <label>Trial *</label>
          <select id="trial" required>
            <option value="">Select a trial</option>
            <option value="VISIOR-2024-003">CARDIOPROTECT-II (Phase III) - Cardiology</option>
            <option value="VISIOR-2024-011">NEURO-RESTORE (Phase II) - Parkinson's</option>
            <option value="VISIOR-2022-044">DIABETIX-I (Completed) - Diabetes</option>
          </select>
        </div>

        <div class="form-group">
          <label>Patient ID *</label>
          <input type="text" id="patientId" placeholder="e.g., P0483" required>
        </div>

        <div class="form-group">
          <label>First Name *</label>
          <input type="text" id="firstName" placeholder="First name" required>
        </div>

        <div class="form-group">
          <label>Last Name *</label>
          <input type="text" id="lastName" placeholder="Last name" required>
        </div>

        <div class="form-group">
          <label>Date of Birth *</label>
          <input type="date" id="dob" required>
        </div>

        <div class="form-group">
          <label>Gender</label>
          <select id="gender">
            <option>Male</option>
            <option>Female</option>
            <option>Non-binary</option>
            <option>Prefer not to say</option>
          </select>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" id="email" placeholder="patient@email.com">
        </div>

        <div class="form-group">
          <label>Phone</label>
          <input type="tel" id="phone" placeholder="+1 (555) 000-0000">
        </div>

        <div class="form-group">
          <label>Enrollment Date *</label>
          <input type="date" id="enrollmentDate" value="2026-02-26" required>
        </div>

        <div class="form-group">
          <label>Consent Status</label>
          <select id="consent">
            <option>Consented</option>
            <option>Pending</option>
            <option>Withdrawn</option>
          </select>
        </div>

        <div class="form-group full-width">
          <label>Initial Health Status</label>
          <textarea id="healthStatus" rows="3" placeholder="Baseline health information, comorbidities, current medications..."></textarea>
        </div>

        <div class="form-group full-width">
          <label>Additional Notes</label>
          <textarea id="notes" rows="2" placeholder="Any additional information..."></textarea>
        </div>

        <div class="form-group full-width">
          <div class="checkbox-group">
            <label class="checkbox-item">
              <input type="checkbox" id="consentVerified" required>
              <span>I confirm that informed consent has been obtained and documented</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" id="hipaa" required>
              <span>HIPAA authorization obtained</span>
            </label>
          </div>
        </div>
      </div>

      <button type="button" class="btn-primary" onclick="addPatient()">ADD PATIENT TO TRIAL</button>
    </form>
  </div>

  <div class="footer-links">
    <a href="home.html">Home</a> <a href="help.html">Help</a> <a href="privacy.html">Privacy</a> <a href="terms.html">Terms</a>
  </div>
</div>

<script>
function addPatient() {
  const trial = document.getElementById('trial').value;
  const patientId = document.getElementById('patientId').value;
  const firstName = document.getElementById('firstName').value;
  const lastName = document.getElementById('lastName').value;
  const consentVerified = document.getElementById('consentVerified').checked;
  
  if(!trial || !patientId || !firstName || !lastName) {
    alert('Please fill all required fields');
    return;
  }
  
  if(!consentVerified) {
    alert('You must verify that informed consent has been obtained');
    return;
  }
  
  const txHash = '0x' + Array.from({length:40},()=>Math.floor(Math.random()*16).toString(16)).join('');
  const blockNum = '148,' + Math.floor(Math.random()*900);
  
  alert(`‚úÖ Patient Added Successfully\n\nPatient: ${firstName} ${lastName} (${patientId})\nTrial: ${trial}\n\nTransaction Hash: ${txHash.substring(0,20)}...\nBlock: #${blockNum}\n\nThis enrollment has been recorded on the blockchain.`);
  
  window.location.href = 'full-data.html?trial=' + encodeURIComponent(trial);
}
</script>
</body>
</html>