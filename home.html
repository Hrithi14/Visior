<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>VISIOR ‚Äî Verified Intelligent Secure Evidence Registry</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;0,9..40,800&family=Sora:wght@400;600;700;800&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
<style>
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  html,body,#root{width:100%;min-height:100vh;font-family:'DM Sans',sans-serif;background:#F2F6FC;color:#1A2840;scroll-behavior:smooth}
  ::-webkit-scrollbar{width:5px}
  ::-webkit-scrollbar-track{background:#F2F6FC}
  ::-webkit-scrollbar-thumb{background:#C5D3E8;border-radius:4px}
  @keyframes spin{to{transform:rotate(360deg)}}
  @keyframes pulse{0%,100%{box-shadow:0 0 0 3px rgba(60,179,113,0.25)}50%{box-shadow:0 0 0 7px rgba(60,179,113,0.08)}}
  @keyframes fadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
  @keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
  @keyframes blink{0%,100%{opacity:1}50%{opacity:0.4}}
  @keyframes slideIn{from{opacity:0;transform:translateX(-12px)}to{opacity:1;transform:translateX(0)}}
  @keyframes modalIn{from{opacity:0;transform:scale(0.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}
  @keyframes overlayIn{from{opacity:0}to{opacity:1}}
  .card{background:#fff;border-radius:14px;border:1px solid #E4ECF7;box-shadow:0 2px 16px rgba(69,103,183,0.07)}
  .section-label{font-size:10px;font-weight:700;letter-spacing:1.4px;text-transform:uppercase;color:#8FA0BA;margin-bottom:16px}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

const MOCK_TRIALS = [
  {
    id: "NCT-2024-0041",
    title: "PHASE III EFFICACY OF REMDESIVIR IN POST-COVID PULMONARY FIBROSIS",
    researcher: "Dr. Amara Osei-Bonsu",
    institution: "Geneva Institute for Global Health",
    status: "Recruiting",
    posted: "2025-11-14",
    patients: 1840,
    duration: "36 months",
    effectiveness: "Preliminary data shows 42% reduction in fibrotic progression markers at 12-month follow-up.",
    ageRange: "30‚Äì70 yrs",
    phase: "Phase III",
    disease: "Pulmonary Fibrosis",
    drug: "Remdesivir",
    blockchain: "hyperledger",
    channel: "trials-main",
    blockNumber: 48291,
    txHash: null, contractAddress: null,
    lastVerified: new Date(Date.now() - 18000), connected: true,
  },
  {
    id: "NCT-2024-0088",
    title: "CRISPR-CAS9 THERAPEUTIC TARGETING IN SICKLE CELL DISEASE ‚Äî LONG-TERM OUTCOMES",
    researcher: "Prof. Leila Nazari",
    institution: "Johns Hopkins Bloomberg School",
    status: "Analysis",
    posted: "2025-09-03",
    patients: 620,
    duration: "48 months",
    effectiveness: "87% of patients achieved HbF levels >20%. No major adverse events reported at 36-month follow-up.",
    ageRange: "18‚Äì45 yrs",
    phase: "Phase II",
    disease: "Sickle Cell Disease",
    drug: "CRISPR-Cas9 CTX001",
    blockchain: "ethereum",
    channel: null, blockNumber: null,
    txHash: "0x7a3f9c...e48b2d",
    contractAddress: "0xA1b2C3...F9e0D1",
    lastVerified: new Date(Date.now() - 7000), connected: true,
  },
  {
    id: "NCT-2025-0012",
    title: "ANTI-PD1 COMBINATION THERAPY IN TRIPLE-NEGATIVE BREAST CANCER",
    researcher: "Dr. Sven Lindqvist",
    institution: "Karolinska Institutet, Stockholm",
    status: "Completed",
    posted: "2024-06-21",
    patients: 3100,
    duration: "60 months",
    effectiveness: "Median OS improved by 14.3 months vs standard care. Overall response rate: 61%.",
    ageRange: "25‚Äì65 yrs",
    phase: "Phase III",
    disease: "Breast Cancer",
    drug: "Pembrolizumab + Chemotherapy",
    blockchain: "hyperledger",
    channel: "oncology-network",
    blockNumber: 91055,
    txHash: null, contractAddress: null,
    lastVerified: new Date(Date.now() - 45000), connected: true,
  },
  {
    id: "NCT-2025-0031",
    title: "GLP-1 RECEPTOR AGONIST NEUROPROTECTION IN EARLY-ONSET PARKINSON'S DISEASE",
    researcher: "Dr. Fatima Al-Rashidi",
    institution: "King Abdullah Medical City",
    status: "Recruiting",
    posted: "2026-01-08",
    patients: 940,
    duration: "24 months",
    effectiveness: "Motor score stabilisation observed in 68% of treated cohort at 6-month interim analysis.",
    ageRange: "40‚Äì65 yrs",
    phase: "Phase II",
    disease: "Parkinson's Disease",
    drug: "Semaglutide",
    blockchain: "ethereum",
    channel: null, blockNumber: null,
    txHash: "0x3c1d8e...a99f0b",
    contractAddress: "0xD4e5F6...C7b8A9",
    lastVerified: new Date(Date.now() - 3000), connected: true,
  },
  {
    id: "NCT-2025-0055",
    title: "mRNA VACCINE PLATFORM FOR DRUG-RESISTANT TUBERCULOSIS ‚Äî ADAPTIVE TRIAL",
    researcher: "Dr. Chinwe Okafor",
    institution: "Africa Health Research Institute",
    status: "Recruiting",
    posted: "2026-02-01",
    patients: 2200,
    duration: "30 months",
    effectiveness: "Interim data pending. Phase I showed robust immunogenicity with T-cell activation in 94% of participants.",
    ageRange: "18‚Äì55 yrs",
    phase: "Phase II",
    disease: "Tuberculosis",
    drug: "mRNA-TB Vaccine",
    blockchain: "hyperledger",
    channel: "vaccine-trials",
    blockNumber: 12874,
    txHash: null, contractAddress: null,
    lastVerified: new Date(Date.now() - 2000), connected: true,
  },
  {
    id: "NCT-2025-0067",
    title: "ORAL FACTOR XI INHIBITOR IN ATRIAL FIBRILLATION STROKE PREVENTION",
    researcher: "Prof. Hans-Peter Schulz",
    institution: "Charit√© Universit√§tsmedizin Berlin",
    status: "Analysis",
    posted: "2025-07-15",
    patients: 4850,
    duration: "42 months",
    effectiveness: "31% relative risk reduction in ischaemic stroke vs warfarin. Major bleeding events reduced by 44%.",
    ageRange: "55‚Äì80 yrs",
    phase: "Phase III",
    disease: "Atrial Fibrillation",
    drug: "Abelacimab",
    blockchain: "ethereum",
    channel: null, blockNumber: null,
    txHash: "0x9f2e1a...c33d7f",
    contractAddress: "0xE7f8G9...H1i2J3",
    lastVerified: new Date(Date.now() - 11000), connected: true,
  },
];

const STATUS_CFG = {
  Recruiting: { bg:"#EAF6EA", color:"#256825", dot:"#3CB371", label:"Recruiting" },
  Completed:  { bg:"#EBF0FA", color:"#2C4E9E", dot:"#4567B7", label:"Completed" },
  Analysis:   { bg:"#FFF7E6", color:"#8B6000", dot:"#D4A017", label:"Analysis" },
};

const CHAIN_CFG = {
  hyperledger: { label: "Hyperledger Fabric", short: "HLF", color: "#1A3C5E", bg: "#E6EEF5", accent: "#2C6FAC" },
  ethereum:    { label: "Ethereum",           short: "ETH", color: "#3D2A8A", bg: "#EEE9FA", accent: "#6B4FCF" },
};

function useDebounce(val, delay) {
  const [deb, setDeb] = useState(val);
  useEffect(() => {
    const t = setTimeout(() => setDeb(val), delay);
    return () => clearTimeout(t);
  }, [val, delay]);
  return deb;
}

function timeAgo(d) {
  const s = Math.floor((Date.now() - d) / 1000);
  if (s < 60) return `${s}s ago`;
  if (s < 3600) return `${Math.floor(s/60)}m ago`;
  return `${Math.floor(s/3600)}h ago`;
}

function trunc(h, n=10) {
  if (!h) return "‚Äî";
  return h.slice(0,n) + "‚Ä¶" + h.slice(-8);
}

function initials(name) {
  return name.replace(/^(Dr\.|Prof\.)\s*/,"").split(" ").slice(0,2).map(w=>w[0]).join("").toUpperCase();
}

function ShieldLogo({ size=34 }) {
  return (
    <svg width={size} height={size*1.12} viewBox="0 0 36 40" fill="none">
      <path d="M18 2L2 9V21C2 30 9 37.5 18 39.5C27 37.5 34 30 34 21V9L18 2Z" fill="#4567B7"/>
      <path d="M18 2L2 9V21C2 30 9 37.5 18 39.5C27 37.5 34 30 34 21V9L18 2Z" stroke="#2C4E9E" strokeWidth="1" fill="none"/>
      <path d="M11 20L16 25.5L26 14" stroke="white" strokeWidth="2.4" strokeLinecap="round" strokeLinejoin="round"/>
    </svg>
  );
}

function LiveDot({ active, size=8 }) {
  return (
    <span style={{
      width:size, height:size, borderRadius:"50%",
      background: active ? "#3CB371" : "#bbb",
      display:"inline-block", flexShrink:0,
      boxShadow: active ? "0 0 0 3px rgba(60,179,113,0.22)" : "none",
      animation: active ? "pulse 2s infinite" : "none",
    }}/>
  );
}

function Spinner({ color="#4567B7", size=14 }) {
  return (
    <svg width={size} height={size} viewBox="0 0 14 14"
      style={{ animation:"spin 0.7s linear infinite", flexShrink:0 }}>
      <circle cx="7" cy="7" r="5" stroke={color} strokeWidth="2"
        fill="none" strokeDasharray="22" strokeDashoffset="6" opacity="0.85"/>
    </svg>
  );
}

function StatusBadge({ status }) {
  const c = STATUS_CFG[status] || STATUS_CFG.Completed;
  return (
    <span style={{
      display:"inline-flex", alignItems:"center", gap:5,
      background:c.bg, color:c.color,
      borderRadius:5, fontSize:10, fontWeight:700,
      letterSpacing:0.7, padding:"3px 9px", textTransform:"uppercase",
    }}>
      <span style={{ width:5, height:5, borderRadius:"50%", background:c.dot, flexShrink:0 }}/>
      {c.label}
    </span>
  );
}

function ChainBadge({ chain }) {
  const c = CHAIN_CFG[chain];
  return (
    <span style={{
      display:"inline-flex", alignItems:"center", gap:5,
      background:c.bg, color:c.color,
      borderRadius:5, fontSize:10, fontWeight:700,
      letterSpacing:0.7, padding:"3px 9px", textTransform:"uppercase",
    }}>
      <svg width="8" height="8" viewBox="0 0 8 8">
        <rect x="0.5" y="0.5" width="3" height="3" rx="0.7" fill={c.color} opacity="0.8"/>
        <rect x="4.5" y="0.5" width="3" height="3" rx="0.7" fill={c.color}/>
        <rect x="0.5" y="4.5" width="3" height="3" rx="0.7" fill={c.color}/>
        <rect x="4.5" y="4.5" width="3" height="3" rx="0.7" fill={c.color} opacity="0.8"/>
      </svg>
      {c.short}
    </span>
  );
}

function TrialCard({ trial, idx }) {
  const [exp, setExp] = useState(false);
  const [ts, setTs] = useState(timeAgo(trial.lastVerified));
  const [hov, setHov] = useState(false);

  useEffect(() => {
    const t = setInterval(() => setTs(timeAgo(trial.lastVerified)), 5000);
    return () => clearInterval(t);
  }, []);

  const avatarColors = [
    ["#4567B7","#2C4E9E"],["#256825","#1A5018"],["#8B6000","#6B4800"],
    ["#3D2A8A","#2A1A6A"],["#1A3C5E","#0F2440"],["#C0392B","#922B21"],
  ];
  const [a,b] = avatarColors[idx % avatarColors.length];

  return (
    <div
      onMouseEnter={() => setHov(true)}
      onMouseLeave={() => setHov(false)}
      style={{
        background:"#fff", borderRadius:14, border:"1px solid #E4ECF7",
        boxShadow: hov ? "0 10px 36px rgba(69,103,183,0.14)" : "0 2px 16px rgba(69,103,183,0.06)",
        overflow:"hidden",
        transform: hov ? "translateY(-3px)" : "translateY(0)",
        transition:"box-shadow 0.2s, transform 0.2s",
        animation:`fadeSlideIn 0.45s ease ${idx*0.06}s both`,
        display:"flex", flexDirection:"column",
        cursor: "pointer"
      }}
      onClick={() => window.location.href = `trial-detail.html?id=${trial.id}`}
    >
      <div style={{ background:"#F6F9FD", padding:"12px 22px 11px", borderBottom:"1px solid #EDF2FB", display:"flex", alignItems:"center", justifyContent:"space-between", flexWrap:"wrap", gap:6 }}>
        <div style={{ display:"flex", alignItems:"center", gap:6, flexWrap:"wrap" }}>
          <StatusBadge status={trial.status} />
          <ChainBadge chain={trial.blockchain} />
          <span style={{ fontSize:10, color:"#99AECA", fontWeight:600, letterSpacing:0.5 }}>{trial.phase.toUpperCase()}</span>
        </div>
        <div style={{ display:"flex", alignItems:"center", gap:8 }}>
          <span style={{ fontSize:10, color:"#B0C0D8", fontWeight:500, fontFamily:"monospace" }}>{trial.id}</span>
        </div>
      </div>
      <div style={{ padding:"20px 22px 18px", flex:1, display:"flex", flexDirection:"column" }}>
        <h3 style={{ fontSize:12.5, fontWeight:700, color:"#1A2840", letterSpacing:0.5, lineHeight:1.55, marginBottom:14, textTransform:"uppercase" }}>
          {trial.title}
        </h3>
        <div style={{ display:"flex", alignItems:"center", gap:9, marginBottom:16 }}>
          <div style={{ width:32, height:32, borderRadius:"50%", flexShrink:0, background:`linear-gradient(135deg,${a},${b})`, display:"flex", alignItems:"center", justifyContent:"center" }}>
            <span style={{ color:"white", fontSize:11, fontWeight:700 }}>{initials(trial.researcher)}</span>
          </div>
          <div>
            <div style={{ fontSize:12, fontWeight:600, color:"#2A3D5A" }}>{trial.researcher}</div>
            <div style={{ fontSize:10, color:"#8FA0BA" }}>{trial.institution}</div>
          </div>
        </div>
        <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr 1fr 1fr", gap:8, marginBottom:14 }}>
          {[
            { l:"Patients", v: trial.patients.toLocaleString() },
            { l:"Duration", v: trial.duration },
            { l:"Age Range", v: trial.ageRange },
            { l:"Posted",   v: new Date(trial.posted).toLocaleDateString("en-GB",{month:"short",year:"numeric"}) },
          ].map(m => (
            <div key={m.l} style={{ background:"#F4F7FC", borderRadius:8, padding:"8px 10px" }}>
              <div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.6, textTransform:"uppercase", marginBottom:2 }}>{m.l}</div>
              <div style={{ fontSize:12, fontWeight:700, color:"#1A2840" }}>{m.v}</div>
            </div>
          ))}
        </div>
        <div style={{ background:"#F9FBFF", border:"1px solid #E4ECF7", borderRadius:9, padding:"11px 13px", marginBottom:14, flex:1 }}>
          <div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.8, textTransform:"uppercase", marginBottom:5 }}>Effectiveness / Results</div>
          <p style={{ fontSize:12, color:"#3A5070", lineHeight:1.65, margin:0 }}>{trial.effectiveness}</p>
        </div>
        <button
          onClick={(e) => { e.stopPropagation(); setExp(!exp); }}
          style={{ background:"none", border:"none", cursor:"pointer", fontSize:11, color:"#4567B7", fontWeight:600, padding:"0 0 10px", display:"flex", alignItems:"center", gap:5, textAlign:"left", fontFamily:"'DM Sans',sans-serif" }}
        >
          <svg width="11" height="11" viewBox="0 0 11 11" style={{ transform: exp?"rotate(90deg)":"none", transition:"transform 0.2s" }}>
            <path d="M3.5 1.5L7.5 5.5L3.5 9.5" stroke="#4567B7" strokeWidth="1.5" fill="none" strokeLinecap="round"/>
          </svg>
          {exp ? "Hide" : "View"} Blockchain Verification
        </button>
        {exp && (
          <div style={{ background:"#EFF4FB", borderRadius:9, padding:"13px 15px", marginBottom:13, border:"1px solid #DCE9F5" }}>
            <div style={{ display:"grid", gridTemplateColumns:"1fr 1fr", gap:10 }}>
              {trial.blockchain === "hyperledger" ? (<>
                <div><div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.7 }}>Channel</div><div style={{ fontSize:11, fontWeight:600 }}>{trial.channel}</div></div>
                <div><div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.7 }}>Block ‚Ññ</div><div style={{ fontSize:11, fontWeight:600 }}>#{trial.blockNumber?.toLocaleString()}</div></div>
              </>) : (<>
                <div><div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.7 }}>Tx Hash</div><div style={{ fontSize:10, fontFamily:"monospace", color:"#4567B7" }}>{trunc(trial.txHash)}</div></div>
                <div><div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.7 }}>Contract</div><div style={{ fontSize:10, fontFamily:"monospace", color:"#4567B7" }}>{trunc(trial.contractAddress)}</div></div>
              </>)}
              <div><div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.7 }}>Network</div><div style={{ fontSize:11, fontWeight:600 }}>{CHAIN_CFG[trial.blockchain].label}</div></div>
              <div><div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.7 }}>Verified</div><div style={{ fontSize:11, fontWeight:600 }}>{ts}</div></div>
            </div>
          </div>
        )}
        <div style={{ display:"flex", gap:9, flexWrap:"wrap" }} onClick={(e) => e.stopPropagation()}>
          <button className="btn-primary" style={{padding:"7px 14px",borderRadius:8,background:"#4567B7",color:"#fff",border:"none",fontSize:11,fontWeight:600,cursor:"pointer"}} onClick={() => window.location.href=`trial-detail.html?id=${trial.id}`}>View Public Summary</button>
          <button className="btn-outline" style={{padding:"7px 14px",borderRadius:8,background:"#fff",border:"1.5px solid #BFCFE8",color:"#4567B7",fontSize:11,fontWeight:600,cursor:"pointer"}} onClick={() => window.location.href=`request-access.html?trial=${trial.id}`}>Request Full Access</button>
        </div>
      </div>
    </div>
  );
}

function ChainPanel({ trials }) {
  const [chain, setChain] = useState("hyperledger");

  const cTrials = trials.filter(t => t.blockchain === chain);

  return (
    <div style={{ background:"#fff", borderRadius:14, border:"1px solid #E4ECF7", boxShadow:"0 2px 16px rgba(69,103,183,0.07)", overflow:"hidden", marginBottom:40 }}>
      <div style={{ background:"linear-gradient(100deg,#0F1A2E 0%,#1E3A6E 100%)", padding:"18px 28px", display:"flex", alignItems:"center", justifyContent:"space-between" }}>
        <div style={{ display:"flex", alignItems:"center", gap:10 }}>
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M4 8L11 4L18 8V14L11 18L4 14V8Z" stroke="rgba(255,255,255,0.7)" strokeWidth="1.2" fill="none"/>
            <path d="M11 4V18M4 8L18 14M18 8L4 14" stroke="rgba(255,255,255,0.2)" strokeWidth="0.8"/>
          </svg>
          <div>
            <div style={{ color:"white", fontWeight:700, fontSize:14 }}>Blockchain Verification Panel</div>
            <div style={{ color:"rgba(255,255,255,0.45)", fontSize:10, letterSpacing:0.8 }}>REAL-TIME LEDGER STATUS</div>
          </div>
        </div>
        <div style={{ display:"flex", alignItems:"center", gap:7 }}>
          <LiveDot active size={8}/>
          <span style={{ fontSize:11, color:"#3CB371", fontWeight:700, letterSpacing:0.4 }}>LIVE</span>
        </div>
      </div>

      <div style={{ padding:"22px 28px" }}>
        <div style={{ display:"flex", gap:6, marginBottom:22, background:"#F3F6FC", borderRadius:10, padding:4, width:"fit-content" }}>
          {["hyperledger","ethereum"].map(c => (
            <button key={c} onClick={() => setChain(c)} style={{
              padding:"8px 20px", borderRadius:7, border:"none",
              background: chain===c ? "#4567B7" : "transparent",
              color: chain===c ? "white" : "#6B82A8",
              fontSize:12, fontWeight:600, cursor:"pointer", transition:"all 0.18s",
              fontFamily:"'DM Sans',sans-serif",
            }}>
              {c === "hyperledger" ? "Hyperledger Fabric" : "Ethereum"}
            </button>
          ))}
        </div>

        <div style={{ display:"grid", gridTemplateColumns:"repeat(4,1fr)", gap:12, marginBottom:22 }}>
          {[
            { label:"Network",       value: CHAIN_CFG[chain].label },
            { label:"Active Trials", value: `${cTrials.length} trials` },
            { label:"Sync Status",   value: "Fully Synced" },
            { label:"Last Block",    value: chain==="hyperledger" ? `#${Math.max(...cTrials.filter(t=>t.blockNumber).map(t=>t.blockNumber||0)).toLocaleString()}` : "Via Etherscan" },
          ].map(s => (
            <div key={s.label} style={{ background:"#F7FAFF", borderRadius:10, padding:"13px 15px", border:"1px solid #E8EFF8" }}>
              <div style={{ fontSize:9, color:"#8FA0BA", fontWeight:700, letterSpacing:0.7, textTransform:"uppercase", marginBottom:5 }}>{s.label}</div>
              <div style={{ fontSize:13, fontWeight:700, color:"#1A2840" }}>{s.value}</div>
            </div>
          ))}
        </div>

        <div style={{ borderTop:"1px solid #EDF2FB", paddingTop:16 }}>
          <div style={{ fontSize:10, color:"#8FA0BA", fontWeight:700, letterSpacing:0.8, textTransform:"uppercase", marginBottom:12 }}>Chain Records</div>
          <div style={{ display:"flex", flexDirection:"column", gap:8 }}>
            {cTrials.map(t => (
              <div key={t.id} style={{ display:"flex", alignItems:"center", justifyContent:"space-between", padding:"10px 14px", background:"#F9FBFF", borderRadius:8, border:"1px solid #EDF2FB", cursor:"pointer" }} onClick={() => window.location.href=`trial-detail.html?id=${t.id}`}>
                <div>
                  <div style={{ fontSize:11, fontWeight:700, color:"#1A2840" }}>{t.id}</div>
                  <div style={{ fontSize:10, color:"#8FA0BA", marginTop:2 }}>
                    {t.blockchain==="hyperledger" ? `Channel: ${t.channel} ¬∑ Block #${t.blockNumber?.toLocaleString()}` : `Tx: ${trunc(t.txHash)}`}
                  </div>
                </div>
                <div style={{ textAlign:"right" }}>
                  <div style={{ fontSize:10, color:"#3CB371", fontWeight:600, display:"flex", alignItems:"center", gap:4, justifyContent:"flex-end" }}>
                    <LiveDot active size={6}/> Verified
                  </div>
                  <div style={{ fontSize:9, color:"#99AECA", marginTop:2 }}>{timeAgo(t.lastVerified)}</div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
}

function App() {
  const [query, setQuery] = useState("");
  const [loading, setLoading] = useState(true);
  const [trials, setTrials] = useState([]);
  const [scrolled, setScrolled] = useState(false);
  const [focused, setFocused] = useState(false);
  const [chainFilter, setChainFilter] = useState("All");
  const debQuery = useDebounce(query, 300);

  useEffect(() => {
    setTimeout(() => { setTrials(MOCK_TRIALS); setLoading(false); }, 1200);
  }, []);

  useEffect(() => {
    if (!debQuery && chainFilter==="All") { setTrials(MOCK_TRIALS); return; }
    setLoading(true);
    const t = setTimeout(() => {
      let r = MOCK_TRIALS;
      if (debQuery) {
        const q = debQuery.toLowerCase();
        r = r.filter(t =>
          t.title.toLowerCase().includes(q) ||
          t.disease.toLowerCase().includes(q) ||
          t.drug.toLowerCase().includes(q) ||
          t.researcher.toLowerCase().includes(q) ||
          t.phase.toLowerCase().includes(q) ||
          t.status.toLowerCase().includes(q) ||
          t.institution.toLowerCase().includes(q)
        );
      }
      if (chainFilter !== "All") {
        r = r.filter(t =>
          (chainFilter==="Ethereum" && t.blockchain==="ethereum") ||
          (chainFilter==="Hyperledger" && t.blockchain==="hyperledger")
        );
      }
      setTrials(r);
      setLoading(false);
    }, 480);
    return () => clearTimeout(t);
  }, [debQuery, chainFilter]);

  useEffect(() => {
    const onScroll = () => setScrolled(window.scrollY > 24);
    window.addEventListener("scroll", onScroll);
    return () => window.removeEventListener("scroll", onScroll);
  }, []);

  function Skeleton() {
    return (
      <div style={{ background:"#fff", borderRadius:14, padding:"26px 24px", border:"1px solid #E4ECF7", boxShadow:"0 2px 12px rgba(69,103,183,0.05)" }}>
        {[70,45,100,55,80].map((w,i) => (
          <div key={i} style={{
            height: i===0?18:11, width:`${w}%`, borderRadius:6, marginBottom: i===0?18:10,
            background:"linear-gradient(90deg,#f0f4fb 25%,#e4ecf8 50%,#f0f4fb 75%)",
            backgroundSize:"200% 100%", animation:"shimmer 1.6s infinite",
          }}/>
        ))}
      </div>
    );
  }

  return (
    <div style={{ minHeight:"100vh", width:"100%", background:"#F2F6FC" }}>
      <nav style={{
        position:"fixed", top:0, left:0, right:0, zIndex:200,
        background: scrolled ? "rgba(255,255,255,0.97)" : "white",
        backdropFilter: scrolled ? "blur(14px)" : "none",
        borderBottom:`1px solid ${scrolled?"#DDE8F5":"#EDF2FB"}`,
        boxShadow: scrolled ? "0 2px 24px rgba(69,103,183,0.10)" : "none",
        transition:"all 0.3s ease",
      }}>
        <div style={{ maxWidth:1440, margin:"0 auto", padding:"0 40px", height:66, display:"flex", alignItems:"center", justifyContent:"space-between" }}>
          <a href="home.html" style={{ display:"flex", alignItems:"center", gap:12, textDecoration:"none" }}>
            <ShieldLogo size={32}/>
            <div>
              <div style={{ fontSize:20, fontWeight:800, color:"#1A2840", letterSpacing:-0.6, lineHeight:1, fontFamily:"'Sora',sans-serif" }}>
                WIS<span style={{ color:"#4567B7" }}>ER</span>
              </div>
              <div style={{ fontSize:9, color:"#8FA0BA", letterSpacing:1.5, fontWeight:600, textTransform:"uppercase" }}>Secure Clinical Trials</div>
            </div>
          </a>
          <div style={{ display:"flex", alignItems:"center", gap:8, background:"#F4F7FC", borderRadius:8, padding:"6px 14px", border:"1px solid #E4ECF7" }}>
            <LiveDot active size={6}/>
            <span style={{ fontSize:11, color:"#6B82A8", fontWeight:600, fontFamily:"monospace", letterSpacing:0.3 }}>
              {new Date().toISOString().replace("T"," ").slice(0,19)} UTC
            </span>
          </div>
          <div style={{ display:"flex", gap:10 }}>
            <a href="login.html" style={{
              padding:"8px 20px", borderRadius:9, border:"1.5px solid #D0DCF0",
              fontSize:13, fontWeight:600, color:"#4567B7", textDecoration:"none",
              background:"white", display:"inline-flex", alignItems:"center", transition:"all 0.18s"
            }}
              onMouseEnter={e=>{e.target.style.background="#F0F5FF";e.target.style.borderColor="#4567B7";}}
              onMouseLeave={e=>{e.target.style.background="white";e.target.style.borderColor="#D0DCF0";}}
            >Sign In</a>
            <a href="register.html" style={{
              padding:"8px 20px", borderRadius:9, border:"none",
              fontSize:13, fontWeight:600, color:"white", textDecoration:"none",
              background:"linear-gradient(135deg,#4567B7,#2C4E9E)",
              transition:"all 0.2s", display:"inline-flex", alignItems:"center",
              boxShadow:"0 2px 10px rgba(69,103,183,0.32)",
            }}
              onMouseEnter={e=>{e.target.style.boxShadow="0 5px 18px rgba(69,103,183,0.48)";e.target.style.transform="translateY(-1px)";}}
              onMouseLeave={e=>{e.target.style.boxShadow="0 2px 10px rgba(69,103,183,0.32)";e.target.style.transform="translateY(0)";}}
            >Register</a>
          </div>
        </div>
      </nav>

      <section style={{ paddingTop:118, paddingBottom:72, background:"linear-gradient(175deg,#EDF3FC 0%,#F7FAFF 55%,#F2F6FC 100%)", position:"relative", overflow:"hidden", width:"100%" }}>
        <div style={{ position:"absolute", top:-100, right:-120, width:560, height:560, borderRadius:"50%", background:"radial-gradient(circle,rgba(69,103,183,1) 0%,transparent 68%)", animation:"pulse 9s ease-in-out infinite", pointerEvents:"none" }}/>
        <div style={{ position:"absolute", bottom:-80, left:-80, width:380, height:380, borderRadius:"50%", background:"radial-gradient(circle,rgba(44,78,158,1) 0%,transparent 68%)", animation:"pulse 11s ease-in-out infinite 3s", pointerEvents:"none" }}/>
        <div style={{ position:"absolute", inset:0, backgroundImage:"linear-gradient(rgba(69,103,183,0.035) 1px,transparent 1px),linear-gradient(90deg,rgba(69,103,183,0.035) 1px,transparent 1px)", backgroundSize:"44px 44px", pointerEvents:"none" }}/>

        <div style={{ maxWidth:960, margin:"0 auto", padding:"0 40px", textAlign:"center", position:"relative" }}>
          <div style={{ display:"inline-flex", alignItems:"center", gap:8, background:"rgba(255,255,255,0.88)", border:"1px solid #D0DFF8", borderRadius:100, padding:"7px 18px", marginBottom:32, backdropFilter:"blur(8px)", boxShadow:"0 2px 12px rgba(69,103,183,0.08)" }}>
            <LiveDot active size={7}/>
            <span style={{ fontSize:11, fontWeight:700, color:"#4567B7", letterSpacing:1 }}>MULTI-BLOCKCHAIN VERIFIED REGISTRY</span>
          </div>

          <h1 style={{ fontFamily:"'Sora',sans-serif", fontSize:"clamp(36px,5.5vw,62px)", fontWeight:800, lineHeight:1.12, color:"#1A2840", letterSpacing:-1.8, marginBottom:20 }}>
            Explore Blockchain&#8209;Verified<br/>
            <span style={{ color:"#4567B7" }}>Clinical Trials</span>
          </h1>

          <p style={{ fontSize:17, color:"#5A7090", lineHeight:1.7, marginBottom:14 }}>
            Transparent. Tamper&#8209;Proof. Multi&#8209;Chain Verified.
          </p>
          <p style={{ fontSize:12, color:"#99AECA", marginBottom:44, letterSpacing:0.3 }}>
            Supports Hyperledger Fabric ¬∑ Ethereum
          </p>

          <div style={{ position:"relative", maxWidth:720, margin:"0 auto", borderRadius:14, overflow:"hidden", boxShadow: focused ? "0 0 0 3.5px rgba(69,103,183,0.22),0 10px 40px rgba(69,103,183,0.16)" : "0 4px 28px rgba(69,103,183,0.13)", transition:"box-shadow 0.25s" }}>
            <div style={{ position:"absolute", left:20, top:"50%", transform:"translateY(-50%)", zIndex:1, pointerEvents:"none" }}>
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <circle cx="8" cy="8" r="5.5" stroke="#8FA0BA" strokeWidth="1.6"/>
                <path d="M12.5 12.5L16 16" stroke="#8FA0BA" strokeWidth="1.6" strokeLinecap="round"/>
              </svg>
            </div>
            <input
              type="text" value={query}
              onChange={e => setQuery(e.target.value)}
              placeholder="Search by disease, drug, researcher, phase, institution‚Ä¶"
              onFocus={() => setFocused(true)}
              onBlur={() => setFocused(false)}
              style={{ width:"100%", padding:"19px 140px 19px 52px", border:"1.5px solid #D0DFF8", borderRadius:14, fontSize:14, color:"#1A2840", outline:"none", background:"white", fontFamily:"'DM Sans',sans-serif", letterSpacing:0.1 }}
            />
            {query && (
              <button onClick={() => setQuery("")} style={{ position:"absolute", right:118, top:"50%", transform:"translateY(-50%)", background:"none", border:"none", cursor:"pointer", color:"#99AECA", fontSize:15, lineHeight:1 }}>‚úï</button>
            )}
            <button style={{ position:"absolute", right:10, top:"50%", transform:"translateY(-50%)", background:"linear-gradient(135deg,#4567B7,#2C4E9E)", color:"white", border:"none", borderRadius:9, padding:"10px 22px", fontSize:13, fontWeight:600, cursor:"pointer", fontFamily:"'DM Sans',sans-serif" }}>
              Search
            </button>
          </div>

          <div style={{ display:"flex", gap:8, justifyContent:"center", marginTop:18, flexWrap:"wrap" }}>
            {["Oncology","Phase III","Recruiting","CRISPR","Parkinson's","Vaccine","Rare Disease"].map(tag => (
              <button key={tag} onClick={() => setQuery(tag)} style={{ padding:"5px 15px", borderRadius:100, border:"1px solid #C8D9F0", background:"rgba(255,255,255,0.75)", fontSize:11, color:"#4567B7", fontWeight:600, cursor:"pointer", backdropFilter:"blur(4px)", transition:"all 0.18s", fontFamily:"'DM Sans',sans-serif" }}
                onMouseEnter={e=>{e.target.style.background="#4567B7";e.target.style.color="white";e.target.style.borderColor="#4567B7";}}
                onMouseLeave={e=>{e.target.style.background="rgba(255,255,255,0.75)";e.target.style.color="#4567B7";e.target.style.borderColor="#C8D9F0";}}
              >{tag}</button>
            ))}
          </div>
        </div>
      </section>

      <div style={{ background:"white", borderTop:"1px solid #E4ECF7", borderBottom:"1px solid #E4ECF7", width:"100%" }}>
        <div style={{ maxWidth:1440, margin:"0 auto", padding:"0 40px", display:"flex", flexWrap:"wrap" }}>
          {[
            { label:"Registered Trials", value:"12,490+" },
            { label:"Institutions",       value:"840+" },
            { label:"Patients Enrolled",  value:"4.2M+" },
            { label:"Blockchain Networks",value:"2 Active" },
            { label:"Countries",          value:"68" },
          ].map((s,i,arr) => (
            <div key={s.label} style={{ flex:1, minWidth:140, textAlign:"center", padding:"18px 0", borderRight: i<arr.length-1?"1px solid #EDF2FB":"none" }}>
              <div style={{ fontSize:24, fontWeight:800, color:"#4567B7", fontFamily:"'Sora',sans-serif", letterSpacing:-0.8 }}>{s.value}</div>
              <div style={{ fontSize:9.5, color:"#99AECA", fontWeight:600, letterSpacing:0.8, textTransform:"uppercase", marginTop:3 }}>{s.label}</div>
            </div>
          ))}
        </div>
      </div>

      <main style={{ maxWidth:1440, margin:"0 auto", padding:"50px 40px 100px", width:"100%" }}>
        <ChainPanel trials={trials.length > 0 ? trials : MOCK_TRIALS} />

        <div style={{ display:"flex", alignItems:"center", justifyContent:"space-between", marginBottom:26, flexWrap:"wrap", gap:14 }}>
          <div>
            <h2 style={{ fontSize:23, fontWeight:700, color:"#1A2840", fontFamily:"'Sora',sans-serif", letterSpacing:-0.5, margin:0 }}>
              Latest Verified Trials
            </h2>
            <p style={{ fontSize:12, color:"#8FA0BA", marginTop:4 }}>
              {loading ? "Fetching from blockchain nodes‚Ä¶" : `${trials.length} trial${trials.length!==1?"s":""} found${query?` for "${query}"`:""}`}
            </p>
          </div>
          <div style={{ display:"flex", gap:8 }}>
            {["All","Hyperledger","Ethereum"].map(f => (
              <button key={f} onClick={() => setChainFilter(f)} style={{
                padding:"8px 16px", borderRadius:8,
                border: chainFilter===f ? "1.5px solid #4567B7" : "1.5px solid #D0DCF0",
                background: chainFilter===f ? "#4567B7" : "white",
                color: chainFilter===f ? "white" : "#6B82A8",
                fontSize:12, fontWeight:600, cursor:"pointer", transition:"all 0.18s",
                fontFamily:"'DM Sans',sans-serif",
              }}>{f}</button>
            ))}
          </div>
        </div>

        <div style={{ display:"grid", gridTemplateColumns:"repeat(auto-fill,minmax(500px,1fr))", gap:22 }}>
          {loading
            ? Array(6).fill(0).map((_,i) => <Skeleton key={i}/>)
            : trials.length === 0
              ? (
                <div style={{ gridColumn:"1/-1", textAlign:"center", padding:"72px 0" }}>
                  <div style={{ fontSize:44, marginBottom:14 }}>üîç</div>
                  <div style={{ fontSize:17, color:"#4A5E7A", fontWeight:600 }}>No trials match your search</div>
                  <div style={{ fontSize:13, color:"#8FA0BA", marginTop:6 }}>Try different keywords or clear the filter</div>
                  <button onClick={() => { setQuery(""); setChainFilter("All"); }} style={{ marginTop:18, padding:"9px 22px", borderRadius:9, border:"1.5px solid #4567B7", background:"white", color:"#4567B7", fontSize:12, fontWeight:600, cursor:"pointer", fontFamily:"'DM Sans',sans-serif" }}>Clear Search</button>
                </div>
              )
              : trials.map((t,i) => (
                <TrialCard key={t.id} trial={t} idx={i}/>
              ))
          }
        </div>
      </main>

      <footer style={{ background:"#0C1624", padding:"52px 40px 32px", width:"100%" }}>
        <div style={{ maxWidth:1440, margin:"0 auto" }}>
          <div style={{ display:"flex", justifyContent:"space-between", alignItems:"flex-start", marginBottom:40, flexWrap:"wrap", gap:32 }}>
            <div style={{ maxWidth:300 }}>
              <div style={{ display:"flex", alignItems:"center", gap:11, marginBottom:14 }}>
                <ShieldLogo size={32}/>
                <span style={{ fontFamily:"'Sora',sans-serif", fontSize:22, fontWeight:800, color:"white", letterSpacing:-0.6 }}>WIS<span style={{ color:"#4567B7" }}>ER</span></span>
              </div>
              <p style={{ fontSize:12, color:"rgba(255,255,255,0.32)", lineHeight:1.8 }}>
                A global clinical trials transparency platform powered by multi-blockchain verification and enterprise-grade database infrastructure.
              </p>
            </div>
            <div style={{ display:"flex", gap:56, flexWrap:"wrap" }}>
              {[
                { heading:"Platform", links:[
                  {name:"Home", url:"home.html"},
                  {name:"Search", url:"home.html"},
                  {name:"About", url:"about.html"},
                  {name:"FAQ", url:"help.html"},
                  {name:"Status", url:"status.html"}
                ]},
                { heading:"Legal", links:[
                  {name:"Privacy", url:"privacy.html"},
                  {name:"Terms", url:"terms.html"},
                  {name:"Compliance", url:"compliance.html"},
                  {name:"Security", url:"security.html"},
                  {name:"GDPR", url:"gdpr.html"}
                ]},
                { heading:"Support", links:[
                  {name:"Contact", url:"contact.html"},
                  {name:"Documentation", url:"docs.html"},
                  {name:"API Access", url:"api.html"},
                  {name:"Changelog", url:"changelog.html"},
                  {name:"Community", url:"community.html"}
                ]},
              ].map(col => (
                <div key={col.heading}>
                  <div style={{ fontSize:10, color:"#4567B7", fontWeight:700, letterSpacing:1.2, textTransform:"uppercase", marginBottom:16 }}>{col.heading}</div>
                  {col.links.map(l => (
                    <a key={l.name} href={l.url} style={{ display:"block", fontSize:12, color:"rgba(255,255,255,0.4)", textDecoration:"none", marginBottom:10, transition:"color 0.18s" }}
                      onMouseEnter={e=>e.target.style.color="rgba(255,255,255,0.82)"}
                      onMouseLeave={e=>e.target.style.color="rgba(255,255,255,0.4)"}
                    >{l.name}</a>
                  ))}
                </div>
              ))}
            </div>
          </div>
          <div style={{ borderTop:"1px solid rgba(255,255,255,0.06)", paddingTop:22, display:"flex", justifyContent:"space-between", alignItems:"center", flexWrap:"wrap", gap:12 }}>
            <p style={{ fontSize:11, color:"rgba(255,255,255,0.25)" }}>
              ¬© 2026 VISIOR ‚Äì Multi-Blockchain Clinical Trials Consortium. All rights reserved.
            </p>
            <div style={{ display:"flex", alignItems:"center", gap:6 }}>
              <LiveDot active size={6}/>
              <span style={{ fontSize:11, color:"rgba(255,255,255,0.3)" }}>All systems operational</span>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>